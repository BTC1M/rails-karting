<!-- Accueil section -->
<section id="accueil" class="text-white tm-font-big tm-parallax">
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg tm-navbar" id="tmNav">
    <div class="container">
      <div class="tm-next">
        <%= link_to '#accueil' do %>
          <%= image_tag('logo1.png', class: "navbar-brand logo") %>
          <%= image_tag('img9.jpg', class: "navbar-brand logo-etire logo-circuit-masque") %>
          <%= image_tag('img10.png', class: "navbar-brand logo logo-voiture-masque") %>
        <% end %>
      </div>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars navbar-toggler-icon"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
              <a class="nav-link tm-nav-link" href="#infos">&nbsp;Accueil&nbsp;</a>
          </li>
          <li class="nav-item">
              <a class="nav-link tm-nav-link" href="#galerie">&nbsp;Galerie&nbsp;</a>
          </li>
          <li class="nav-item">
              <a class="nav-link tm-nav-link" href="#horaires">&nbsp;Infos pratiques&nbsp;</a>
          </li>
          <li class="nav-item">
              <a class="nav-link tm-nav-link tm-nav-link-last" href="#contact">&nbsp;Contact&nbsp;</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="text-center tm-hero-text-container">
    <div class="tm-hero-text-container-inner">
      <h2 class="tm-hero-title">Mini circuit électrique</h2>
      <p class="tm-hero-subtitle">
        <br>
        <strong>Saint-Raphaël</strong>
      </p>
    </div>
  </div>

  <!-- Message défilant (jusqu'au 11 mai 2020) -->
  <% if Time.now.strftime("%d").to_i<=20 && Time.now.strftime("%m").to_i<=05 && Time.now.strftime("%Y").to_i<=2020 %>
    <div class="scrolling-limit message-defilant">
      <div class="scrolling">
        Bonjour à tous, le circuit sera ouvert tous les jours à partir du <strong>11 mai</strong> à 14h30. Du gel hydroalcoolique sera à disposition pour les enfants. Les véhicules seront désinfectés le plus souvent possible. A très bientôt !
      </div>
    </div>
  <% end %>

  <div class="tm-next tm-intro-next">
    <a href="#infos" class="text-center tm-down-arrow-link">
      <i class="fas fa-3x fa-caret-down tm-down-arrow"></i>
    </a>
  </div>
</section>

<section id="infos" class="tm-section-pad-top">
  <div class="container">
    <div data-aos="flip-up">
      <h2 class="tm-text-primary mb-4 tm-section-title">Accueil</h2>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <div data-aos="fade-right">
          <div class="tm-intro-text-container">
            <p class="mb-4 mt-3 tm-intro-text">
              Vous souhaitez réaliser une sortie conviviale avec vos enfants ? Et si vous veniez essayer notre circuit de mini-karts électriques situé en bord de mer ?
            </p>
            <p class="tm-intro-text">
              N'attendez plus et venez découvrir cette activité où les aventuriers de plus de 3 ans pourront <strong>piloter</strong> de petits engins au cœur de l'aventure sous les yeux étonnés de leurs parents.
            </p>
            <!-- <a href="" onmousedown="bleep.play()"> -->
              <%= image_tag('mariokart.gif', alt: "Image", class: "mariokart2-gif mb-5") %>
            <!-- </a> -->
            <!-- <button id="clickme" class="btn btn-primary btn-lg">
              Click me!
            </button> -->
            <!-- <div class='some-page-wrapper'>
              <div class='roww'>
                <div class='columnn'>
                  <div class='blue-column mb-5'> -->
                    <%#= image_tag('mariokart.gif', alt: "Image", class: "mariokart1-gif") %>
                  <!-- </div>
                </div>
                <div class='columnn'>
                  <div class='green-column'> -->
                    <%#= image_tag('questionbox.gif', alt: "Image", class: "questionbox-gif") %>
                    <!-- <div class="horizontally">
                      <div class="inner">
                        <%#= image_tag('questionbox.gif', alt: "Image", class: "questionbox-gif") %>
                        <button id="clickme" class="btn btn-primary btn-lg">
                          Click me!
                        </button>
                      </div>
                    </div> -->
                  <!-- </div>
                </div>
              </div>
            </div> -->
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <!-- <img src="img/the-town-01.jpg" alt="Image" class="img-fluid tm-intro-img" /> -->
        <div data-aos="fade-left">
          <div class="tm-intro-img"></div>
          <%#= image_tag('img2.jpg', class: "tm-intro-img") %>
        </div>
      </div>
    </div>

    <div class="row tm-section-pad-top">
      <div class="col-lg-6">
        <div data-aos="fade-up">
          <i class="fas fa-4x fa-car text-center tm-icon"></i>
          <!-- <h4 class="text-center tm-text-primary mb-4">Voitures</h4> -->
        </div>
        <div data-aos="flip-right">
          <p class="ml-5 mr-5 tm-sous-intro-text">
            Les voiturettes électriques permettent une approche de la pratique du karting en toute sécurité : elles sont équipées d'un régulateur de vitesse. Choisissez votre bolide parmi les huit modèles différents disponibles.
          </p>
        </div>
      </div>
    <div class="col-lg-6 mt-5 mt-lg-0">
      <div data-aos="fade-up">
        <i class="fas fa-4x fa-motorcycle text-center tm-icon"></i>
        <!-- <h4 class="text-center tm-text-primary mb-4">Motos</h4> -->
      </div>
      <div data-aos="flip-right">
        <p class="ml-5 mr-5 tm-sous-intro-text">
          Deux modèles de motos sont également disponibles, et conviennent mieux aux habitués. Possibilité de monter à deux pour accompagner le frère ou la soeur.
        </p>
      </div>
    </div>
  </div>
</section>

<section id="galerie" class="tm-section-pad-top">
  <div class="container tm-container-gallery">
    <div class="row">
      <div class="text-center col-12">
        <div data-aos="flip-up">
          <h2 class="tm-text-primary mb-4">Galerie</h2>
        </div>
        <div data-aos="flip-right">
          <p class="mx-auto">
            Découvrez ci-dessous notre sélection de photos.
          </p>
        </div>
      </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div data-aos="zoom-in-up">
              <div class="mx-auto tm-gallery-container">
                  <div class="grid tm-gallery">
                    <a href="<%= asset_path('img1.jpg')%>">
                      <figure class="effect-honey tm-gallery-item">
                        <!-- <img src="img/gallery-tn-01.jpg" alt="Image" class="img-fluid"> -->
                        <%= image_tag('img1.jpg', alt: "Image", class: "img-fluid") %>
                        <figcaption>
                          <i>Cliquez pour aggrandir</i>
                        </figcaption>
                      </figure>
                    </a>
                    <a href="<%= asset_path('img6.jpg')%>">
                      <figure class="effect-honey tm-gallery-item">
                        <!-- <img src="img/gallery-tn-02.jpg" alt="Image" class="img-fluid"> -->
                        <%= image_tag('img6.jpg', alt: "Image", class: "img-fluid") %>
                        <figcaption>
                          <i>Cliquez pour aggrandir</i>
                        </figcaption>
                      </figure>
                    </a>
                    <!-- <a href="<%#= asset_path('img2.jpg')%>">
                      <figure class="effect-honey tm-gallery-item">
                        <%#= image_tag('img2r.jpg', alt: "Image", class: "img-fluid") %>
                        <figcaption>
                          <i>Cliquez pour aggrandir</i>
                        </figcaption>
                      </figure>
                    </a> -->
                    <a href="<%= asset_path('img5.jpg')%>">
                      <figure class="effect-honey tm-gallery-item">
                        <!-- <img src="img/gallery-tn-04.jpg" alt="Image" class="img-fluid"> -->
                        <%= image_tag('img5r.jpg', alt: "Image", class: "img-fluid") %>
                        <figcaption>
                          <i>Cliquez pour aggrandir</i>
                        </figcaption>
                      </figure>
                    </a>
                    <a href="<%= asset_path('img4.jpg')%>">
                      <figure class="effect-honey tm-gallery-item">
                        <!-- <img src="img/gallery-tn-05.jpg" alt="Image" class="img-fluid"> -->
                        <%= image_tag('img4r.jpg', alt: "Image", class: "img-fluid") %>
                        <figcaption>
                          <i>Cliquez pour aggrandir</i>
                        </figcaption>
                      </figure>
                    </a>
                    <a href="<%= asset_path('img3.jpg')%>">
                      <figure class="effect-honey tm-gallery-item">
                        <!-- <img src="img/gallery-tn-06.jpg" alt="Image" class="img-fluid"> -->
                        <%= image_tag('img3.jpg', alt: "Image", class: "img-fluid") %>
                        <figcaption>
                          <i>Cliquez pour aggrandir</i>
                        </figcaption>
                      </figure>
                    </a>
                  </div>
              </div>
            </div>
        </div>
      </div>
  </div>
</section>

<!-- Infos pratiques -->
<section id="horaires" class="tm-section-pad-top">
  <div class="container">
    <div data-aos="flip-up">
      <h2 class="text-center col-12 tm-text-primary mb-4">Informations pratiques</h2>
    </div>
    <div data-aos="flip-right">
      <p class="text-center mb-3">
        Le circuit acueille les enfants entre 3 ans et demi et 10 ans. A proximité, un grand parking est à votre disposition.
      </p>
    </div>
    <div class="row mb-5 mt-4">
      <div class="col-lg-3 text-center mb-4">
        <div data-aos="zoom-in-right">
          <%= image_tag('img-tarifs.png', alt: "Image", class: "img-fluid tm-tarifs-img") %>
        </div>
      </div>
      <div class="col-lg-6 mb-4">
        <div data-aos="flip-up">
          <table class="table-responsive-sm table-striped table-bordered text-center">
            <thead>
              <tr>
                <th scope="col" class="align-middle" style="color: #3496D8;">Horaires</th>
                <th scope="col" class="align-middle">Quand ?</th>
                <th scope="col" class="align-middle">Matin</th>
                <th scope="col" class="align-middle">Après-midi</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Avril ➔ Juin</th>
                <td>Tous les jours</td>
                <td><i class="fas fa-times"></i></td>
                <td>14h30 - 19h00</td>
              </tr>
              <tr>
                <th scope="row">Juillet ➔ Août</th>
                <td>Tous les jours</td>
                <td>10h30 - 12h30</td>
                <td>14h30 - 19h00</td>
              </tr>
              <tr>
                <th scope="row">Septembre</th>
                <td>Tous les jours</td>
                <td><i class="fas fa-times"></i></td>
                <td>14h30 - 19h00</td>
              </tr>
              <tr>
                <th scope="row">Octobre ➔ Mars</th>
                <td>Week-ends / jours fériés / vacances scolaires</td>
                <td><i class="fas fa-times"></i></td>
                <td>14h30 - 19h00</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-lg-3" style="text-align: center">
        <div data-aos="zoom-in-left">
          <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d1448.9886331507676!2d6.7703382!3d43.4193017!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12ce97954988ffaf%3A0xe1a4c8f35f7d633!2sMini%20circuit%20pour%20Kartings%20enfants!5e0!3m2!1sfr!2sfr!4v1588957858609!5m2!1sfr!2sfr" width="100%" height="285" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
          <!-- <div id="map"></div>
          <script async defer
          src="https://maps.googleapis.com/maps/api/js?key=<%#=ENV['GOOGLE_API_KEY']%>&callback=initMap">
          </script> -->
        </div>
      </div>
    </div>

  </div>
</section>

<!-- Contact -->
<section id="contact" class="tm-section-pad-top tm-parallax-2">
  <div class="container tm-container-contact">
    <div data-aos="zoom-out-up">
    <div class="row">
      <div class="col-12">
        <h2 class="mb-4 tm-section-title">Nous contacter</h2>
        <div class="mb-5 tm-underline">
          <div class="tm-underline-inner"></div>
        </div>
        <p class="mb-5">
          <br>
        </p>
      </div>

      <div class="col-sm-12 col-md-6 d-flex align-items-center tm-contact-item">
        <a href="https://www.google.fr/maps/place/Mini+circuit+pour+Kartings+enfants/@43.4193017,6.7703382,18.25z/data=!4m5!3m4!1s0x12ce97954988ffaf:0xe1a4c8f35f7d633!8m2!3d43.4191785!4d6.7711595" class="tm-contact-item-link">
            <i class="fas fa-3x fa-map-marker-alt mr-4"></i>
            <span class="mb-0">207 boulevard du Général de Gaulle <br>83700 Saint-Raphaël, France</span>
        </a>
      </div>
      <div class="col-sm-12 col-md-6 d-flex align-items-center tm-contact-item">
        <a href="mailto:contact@circuit-straph.com" class="tm-contact-item-link">
            <i class="fas fa-3x fa-envelope mr-4"></i>
            <span class="mb-0">contact@circuit-straph.com</span>
        </a>
      </div>
      <div class="col-sm-12 col-md-6 d-flex align-items-center tm-contact-item">
        <a href="https://www.facebook.com/Mini-Circuit-Electrique-101292351544881/" class="tm-contact-item-link">
            <i class="fab fa-3x fa-facebook-f mr-4 ml-2"></i>
            <span class="mb-0">Retrouvez-nous sur Facebook</span>
        </a>
      </div>
      <div class="col-sm-12 col-md-6 d-flex align-items-center tm-contact-item">
        <form action="" method="get">
          <!-- <input name="email" type="text" placeholder="Saisissez votre message" class="tm-input" required /> -->
          <div class="form-group">
            <!-- <label for="exampleFormControlTextarea1">Saisissez votre message</label> -->
            <input type="email" class="form-control mb-1" id="exampleFormControlInput1" placeholder="Adresse email" style="border: 2px solid black;">
            <textarea class="form-control" id="exampleFormControlTextarea1" placeholder="Saisissez votre message" rows="4" cols="50" style="border: 2px solid black;"></textarea>
          </div>
          <button type="submit" class="btn btn-dark tm-btn-submit">Envoyer</button>
        </form>
      </div>
    </div>
  </div>
  </div>
  <footer class="text-center small tm-footer">
      <p class="mb-0">
        &copy; 2020 Circuit - Saint-Raphaël
      </p>
    </footer>
</section>

<script>

  // TODO: React to a click on the button!
  // const boutton = document.querySelector("#clickme");
  // boutton.addEventListener("click", (event) => {
  //   // Do something (callback)
  //   boutton.classList.toggle("disabled");
  //   boutton.innerText = "Bingo!";
  //   const audio = new Audio('../../assets/audios/sound.mp3');
  //   audio.play();
  // });

  // Initialize and add the map
  function initMap() {
    // The location is 43.419228, 6.771087
    var location = {lat: 43.419228, lng: 6.771087};
    // The map, centered at location
    var map = new google.maps.Map(
        document.getElementById('map'), {zoom: 16, center: location});
    // The marker, positioned at location
    var marker = new google.maps.Marker({position: location, map: map});
  }

  function getOffSet(){
    var _offset = 450;
    var windowHeight = window.innerHeight;

    if(windowHeight > 500) {
      _offset = 400;
    }
    if(windowHeight > 680) {
      _offset = 300
    }
    if(windowHeight > 830) {
      _offset = 210;
    }

    return _offset;
  }

  function setParallaxPosition($doc, multiplier, $object){
    var offset = getOffSet();
    var from_top = $doc.scrollTop(),
      bg_css = 'center ' +(multiplier * from_top - offset) + 'px';
    $object.css({"background-position" : bg_css });
  }

  // Parallax function
  // Adapted based on https://codepen.io/roborich/pen/wpAsm
  var background_image_parallax = function($object, multiplier, forceSet){
    multiplier = typeof multiplier !== 'undefined' ? multiplier : 0.5;
    multiplier = 1 - multiplier;
    var $doc = $(document);
    // $object.css({"background-attatchment" : "fixed"});

    if(forceSet) {
      setParallaxPosition($doc, multiplier, $object);
    } else {
      $(window).scroll(function(){
        setParallaxPosition($doc, multiplier, $object);
      });
    }
  };

  var background_image_parallax_2 = function($object, multiplier){
    multiplier = typeof multiplier !== 'undefined' ? multiplier : 0.5;
    multiplier = 1 - multiplier;
    var $doc = $(document);
    $object.css({"background-attachment" : "fixed"});
    $(window).scroll(function(){
      var firstTop = $object.offset().top,
          pos = $(window).scrollTop(),
          yPos = Math.round((multiplier * (firstTop - pos)) - 186);

      var bg_css = 'center ' + yPos + 'px';

      $object.css({"background-position" : bg_css });
    });
  };

  $(function(){
    // Accueil Section - Background Parallax
    background_image_parallax($(".tm-parallax"), 0.30, false);
    background_image_parallax_2($("#contact"), 0.80);

    // Handle window resize
    window.addEventListener('resize', function(){
      background_image_parallax($(".tm-parallax"), 0.30, true);
    }, true);

    // Detect window scroll and update navbar
    $(window).scroll(function(e){
      if($(document).scrollTop() > 120) {
        $('.tm-navbar').addClass("scroll");
        $('.tm-nav-link').addClass("scroll");
      } else {
        $('.tm-navbar').removeClass("scroll");
        $('.tm-nav-link').removeClass("scroll");
      }
    });

    // Close mobile menu after click
    $('#tmNav a').on('click', function(){
      $('.navbar-collapse').removeClass('show');
    })

    // Scroll to corresponding section with animation
    $('#tmNav').singlePageNav();

    // Add smooth scrolling to all links
    // https://www.w3schools.com/howto/howto_css_smooth_scroll.asp
    $("a").on('click', function(event) {
      if (this.hash !== "") {
        event.preventDefault();
        var hash = this.hash;

        $('html, body').animate({
          scrollTop: $(hash).offset().top
        }, 400, function(){
          window.location.hash = hash;
        });
      } // End if
    });

    // Pop up
    $('.tm-gallery').magnificPopup({
      delegate: 'a',
      type: 'image',
      gallery: { enabled: true }
    });

    // Gallery
    $('.tm-gallery').slick({
      dots: true,
      infinite: false,
      slidesToShow: 5,
      slidesToScroll: 2,
      responsive: [
      {
        breakpoint: 1199,
        settings: {
          slidesToShow: 4,
          slidesToScroll: 2
        }
      },
      {
        breakpoint: 991,
        settings: {
          slidesToShow: 3,
          slidesToScroll: 2
        }
      },
      {
        breakpoint: 767,
        settings: {
          slidesToShow: 2,
          slidesToScroll: 1
        }
      },
      {
        breakpoint: 480,
        settings: {
          slidesToShow: 1,
          slidesToScroll: 1
        }
      }
    ]
    });
  });
</script>

